@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@400;700&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
body{background:#1a1a1a;color:#eee;font-family:'Comic Neue',cursive;display:flex;height:100vh;overflow:hidden}
#sidebar{width:310px;min-width:310px;background:#111;border-right:2px solid #333;display:flex;flex-direction:column;overflow-y:auto;padding:10px;gap:7px}
h1{font-family:'Bangers',cursive;font-size:19px;letter-spacing:2px;color:#fff;text-align:center;border-bottom:2px solid #444;padding-bottom:7px}
.sec{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:#777;margin-top:2px}
#upload-area{border:2px dashed #444;border-radius:7px;padding:10px;text-align:center;cursor:pointer;font-size:12px;color:#aaa}
#upload-area:hover{border-color:#fff;color:#fff}
#upload-area input{display:none}
#panels-list{display:flex;flex-direction:column;gap:4px}
.pi{background:#222;border:1px solid #333;border-radius:5px;padding:5px;cursor:pointer;display:flex;align-items:center;gap:5px;font-size:11px;transition:transform 0.15s,opacity 0.15s}
.pi:hover{border-color:#aaa}.pi.sel{border-color:#ff0;background:#2a2a00}
.pi img{width:42px;height:26px;object-fit:cover;border-radius:2px}
.pi .lbl{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.pi.drag-over{border-color:#0ff;background:#002a2a}
.pi.dragging{opacity:0.4;transform:scale(0.95)}
.mbs{display:flex;gap:2px}
.mb,.db{border:none;cursor:pointer;padding:2px 4px;border-radius:3px;font-size:10px}
.mb{background:#333;color:#ccc}.mb:hover{background:#555}
.db{background:#500;color:#f88}.db:hover{background:#800}
#pc{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px}
label{font-size:11px;color:#aaa;display:block;margin-bottom:1px}
input[type=range]{width:100%;accent-color:#ff0}
input[type=number],textarea,select,input[type=text]{width:100%;background:#2a2a2a;border:1px solid #444;color:#eee;padding:4px 6px;border-radius:4px;font-size:12px;font-family:'Comic Neue',cursive}
textarea{resize:vertical;min-height:44px}
.btn{padding:5px 9px;border:none;border-radius:4px;cursor:pointer;font-size:11px;font-family:'Bangers',cursive;letter-spacing:1px}
.btn:hover{opacity:.8}
.by{background:#ff0;color:#000}.bg{background:#0a0;color:#fff}.br{background:#a00;color:#fff}
.bb{background:#07a;color:#fff}.bd{background:#444;color:#eee}.bo{background:#a60;color:#fff}
.brow{display:flex;gap:4px;flex-wrap:wrap}
#blist{display:flex;flex-direction:column;gap:3px;max-height:140px;overflow-y:auto}
.bi{background:#222;border:1px solid #333;border-radius:3px;padding:4px 6px;font-size:10px;cursor:pointer;display:flex;align-items:center;gap:5px}
.bi:hover{border-color:#ff0}.bi.sel{border-color:#ff0;background:#2a2a00}
.bdot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
/* color pickers row */
.cprow{display:flex;gap:6px;align-items:center}
.cprow label{margin:0;white-space:nowrap}
input[type=color]{width:32px;height:24px;padding:0;border:1px solid #555;border-radius:3px;cursor:pointer;background:none}
/* JSON area */
#json-area{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px}
#json-input{min-height:80px;font-size:11px;background:#0a0a0a;color:#8f8}
/* Canvas */
#canvas-wrap{flex:1;overflow:auto;background:#2a2a2a;display:flex;flex-direction:column;align-items:center;padding:14px;gap:10px}
#page-canvas{position:relative;width:800px;background:#000;min-height:100px}
#page-canvas *{transform-style:flat}
.panel-row{display:flex;width:100%;gap:4px;background:#000}
.panel-row-single{display:block;width:100%}
.pp{position:relative;overflow:hidden;border:3px solid #000;cursor:pointer;background:#111;user-select:none;flex:1}
.pp.psel{outline:3px solid #ff0;outline-offset:-3px}
.pp:hover .pov{opacity:1}
.pov{position:absolute;inset:0;background:rgba(255,255,0,.04);opacity:0;pointer-events:none}
.pimgw{width:100%;height:100%;position:absolute;inset:0;overflow:hidden}
.pimgw img{width:100%;height:100%;object-fit:contain;display:block}
.pgap{height:6px;background:#000;width:100%}
.bubble{position:absolute;cursor:move;user-select:none;min-width:60px;min-height:32px;z-index:20}
.binner{position:relative;width:100%;height:100%}
.bsvg{position:absolute;inset:0;width:100%;height:100%;overflow:visible}
.btext{position:absolute;inset:13px;display:flex;align-items:center;justify-content:center;text-align:center;font-family:'Comic Neue',cursive;font-weight:700;line-height:1.3;pointer-events:none;word-break:break-word;z-index:2}
.sfxt{font-family:'Bangers',cursive;letter-spacing:2px}
.brsz{position:absolute;bottom:-5px;right:-5px;width:12px;height:12px;background:#ff0;border:2px solid #000;cursor:se-resize;border-radius:2px;z-index:10}
.bdelbtn{position:absolute;top:-7px;right:-7px;width:15px;height:15px;background:#f00;border:2px solid #000;cursor:pointer;border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;color:#fff;font-size:9px;opacity:0}
.bubble:hover .bdelbtn{opacity:1}
#toolbar{background:#111;border:1px solid #333;border-radius:7px;padding:7px 12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;width:800px;font-size:11px;color:#888}

/* Overlay layers on panels */
.overlay-layer{position:absolute;inset:0;pointer-events:none;z-index:10;overflow:hidden}
.overlay-layer img{width:100%;height:100%;object-fit:cover;opacity:0.5}
.overlay-del{position:absolute;top:2px;right:2px;width:16px;height:16px;background:#f00;border:1px solid #000;border-radius:50%;color:#fff;font-size:9px;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto;opacity:0;z-index:11}
.pp:hover .overlay-del{opacity:1}

/* Asset library panel */
#asset-library{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px}
.asset-item{background:#222;border:1px solid #333;border-radius:5px;padding:6px;cursor:grab;display:flex;align-items:center;gap:8px;font-size:11px}
.asset-item:hover{border-color:#0ff;background:#002a2a}
.asset-item:active{cursor:grabbing}
.asset-item img{width:60px;height:36px;object-fit:cover;border-radius:3px;background:#000}
.asset-item .asset-name{flex:1;color:#ccc}

/* Bubble presets */
#preset-area{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px}
#preset-list{display:flex;flex-direction:column;gap:3px;max-height:120px;overflow-y:auto}
.preset-item{background:#222;border:1px solid #333;border-radius:3px;padding:4px 6px;font-size:10px;cursor:pointer;display:flex;align-items:center;gap:5px}
.preset-item:hover{border-color:#0ff}
.preset-item .preset-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#ccc}
.preset-item .preset-del{background:#500;color:#f88;border:none;cursor:pointer;padding:1px 4px;border-radius:3px;font-size:9px}
.preset-item .preset-del:hover{background:#800}

/* Auto-save indicator */
#autosave-status{font-size:9px;color:#555;text-align:center;padding:2px 0}
#autosave-status.saved{color:#0a0}

/* Panel drop target highlight */
.pp.panel-drop-target{outline:3px dashed #0ff;outline-offset:-3px}

/* Panel group */
.panel-group{background:#000;border-radius:4px}

/* Event history log */
#history-panel{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px}
#history-list{display:flex;flex-direction:column;gap:2px}
.history-item{font-size:9px;color:#888;padding:2px 4px;border-bottom:1px solid #222;line-height:1.4}
.history-time{color:#555;margin-right:4px}
.history-type{color:#0af;font-weight:700;margin-right:3px}
.history-detail{color:#aaa}

/* Group items in sidebar */
.group-item{background:#222;border:1px solid #444;border-radius:6px;margin-bottom:6px;overflow:hidden}
.group-header{background:#2a2a2a;padding:8px;cursor:pointer;display:flex;align-items:center;gap:6px;font-size:11px;border-bottom:1px solid #333}
.group-header:hover{background:#333}
.group-header.dragging{opacity:0.4;transform:scale(0.95)}
.group-header.drag-over{border-color:#0ff;background:#002a2a}

/* Modal overlay */
#modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center}

/* Asset library floating panel - hide old sidebar version */
#asset-library{display:none}
#asset-library-floating{position:fixed;right:20px;top:20px;width:280px;height:360px;background:#111;border:2px solid #444;border-radius:10px;padding:12px;z-index:100;display:flex;flex-direction:column;gap:10px;box-shadow:0 4px 12px rgba(0,0,0,0.5)}

/* JSON area compacted */
#json-area{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px}

/* Preset area - hide for now */
#preset-area{display:none}
