@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@400;700&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
body{background:#1a1a1a;color:#eee;font-family:'Comic Neue',cursive;display:flex;flex-direction:row;height:100vh;overflow:hidden}

/* Sidebars */
.sidebar{width:280px;min-width:0;background:#111;border-right:2px solid #333;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:10px;gap:7px;transition:width 0.3s ease;flex-shrink:0}
#sidebar-left{border-right:2px solid #333}
#sidebar-right{border-left:2px solid #333;border-right:none}
.sidebar.collapsed{width:0;padding:0;border:none;overflow:hidden}

/* Sidebar toggle buttons */
.sidebar-toggle{position:fixed;top:50%;transform:translateY(-50%);z-index:50;background:#333;border:1px solid #555;border-radius:4px;cursor:pointer;padding:8px 4px;font-size:10px;color:#eee;transition:left 0.3s ease,right 0.3s ease}
.sidebar-toggle:hover{background:#555}
.sidebar-toggle-left{left:280px}
.sidebar-toggle-right{right:280px}
.sidebar-toggle-left.collapsed{left:0}
.sidebar-toggle-right.collapsed{right:0}
h1{font-family:'Bangers',cursive;font-size:19px;letter-spacing:2px;color:#fff;text-align:center;border-bottom:2px solid #444;padding-bottom:7px}
.sec{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:#777;margin-top:2px}
#upload-area{border:2px dashed #444;border-radius:7px;padding:10px;text-align:center;cursor:pointer;font-size:12px;color:#aaa}
#upload-area:hover{border-color:#fff;color:#fff}
#upload-area input{display:none}
#panels-list{display:flex;flex-direction:column;gap:4px}

/* Hierarchical tree items */
.tree-item{background:#222;border:1px solid #333;border-radius:3px;padding:4px 6px;margin:2px 0;cursor:pointer;display:flex;align-items:center;gap:5px;font-size:10px;transition:border-color 0.15s}
.tree-item:hover{border-color:#aaa}
.tree-item.sel{border-color:#ff0;background:#2a2a00}
.tree-item.indent-1{margin-left:16px}
.tree-item.indent-2{margin-left:32px}
.tree-item .icon{width:16px;text-align:center;flex-shrink:0}
.tree-item .label{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.tree-item .actions{display:flex;gap:2px;flex-shrink:0}

.mb,.db{border:none;cursor:pointer;padding:2px 4px;border-radius:3px;font-size:10px}
.mb{background:#333;color:#ccc}.mb:hover{background:#555}
.db{background:#500;color:#f88}.db:hover{background:#800}

label{font-size:11px;color:#aaa;display:block;margin-bottom:1px}
input[type=range]{width:100%;accent-color:#ff0;cursor:pointer}
input[type=number],textarea,select,input[type=text]{width:100%;background:#2a2a2a;border:1px solid #444;color:#eee;padding:4px 6px;border-radius:4px;font-size:12px;font-family:'Comic Neue',cursive}
textarea{resize:vertical;min-height:44px}
.btn{padding:5px 9px;border:none;border-radius:4px;cursor:pointer;font-size:11px;font-family:'Bangers',cursive;letter-spacing:1px;transition:opacity 0.15s}
.btn:hover{opacity:.8}
.by{background:#ff0;color:#000}.bg{background:#0a0;color:#fff}.br{background:#a00;color:#fff}
.bb{background:#07a;color:#fff}.bd{background:#444;color:#eee}.bo{background:#a60;color:#fff}
.brow{display:flex;gap:4px;flex-wrap:wrap}

/* Canvas */
#canvas-wrap{flex:1;min-width:0;overflow:auto;background:#2a2a2a;display:flex;flex-direction:column;align-items:center;padding:14px;gap:10px}
#page-canvas{position:relative;width:800px;background:#000;min-height:100px}
.panel-row{display:flex;width:100%;gap:4px;background:#000}
.pp{position:relative;overflow:hidden;border:3px solid #000;cursor:pointer;background:#111;user-select:none}
.pp.psel{outline:3px solid #ff0;outline-offset:-3px;z-index:1}
.pp:hover .pov{opacity:1}
.pov{position:absolute;inset:0;background:rgba(255,255,0,.04);opacity:0;pointer-events:none;transition:opacity 0.2s}
.pimgw{width:100%;height:100%;position:absolute;inset:0;overflow:hidden}
.pimgw img{width:100%;height:100%;object-fit:contain;display:block}
.pgap{height:4px;background:#000;width:100%}

/* Bubbles */
.bubble{position:absolute;cursor:move;user-select:none;min-width:60px;min-height:32px;z-index:20}
.bubble.bsel .binner{box-shadow:0 0 0 2px #ff0}
.binner{position:relative;width:100%;height:100%;border-radius:4px}
.bsvg{position:absolute;inset:0;width:100%;height:100%;overflow:visible}
.btext{position:absolute;inset:13px;display:flex;align-items:center;justify-content:center;text-align:center;font-family:'Comic Neue',cursive;font-weight:700;line-height:1.3;pointer-events:none;word-break:break-word;z-index:2}
.sfxt{font-family:'Bangers',cursive;letter-spacing:2px}
.brsz{position:absolute;bottom:-5px;right:-5px;width:12px;height:12px;background:#ff0;border:2px solid #000;cursor:se-resize;border-radius:2px;z-index:10}
.bdelbtn{position:absolute;top:-7px;right:-7px;width:15px;height:15px;background:#f00;border:2px solid #000;cursor:pointer;border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;color:#fff;font-size:9px;opacity:0;transition:opacity 0.15s}
.bubble:hover .bdelbtn{opacity:1}

/* Toolbar */
#toolbar{background:#111;border:1px solid #333;border-radius:7px;padding:7px 12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;width:800px;font-size:11px;color:#888}

/* Overlay layers */
.overlay-layer{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.overlay-layer img{width:100%;height:100%;object-fit:cover}
.overlay-del{position:absolute;top:4px;right:4px;width:18px;height:18px;background:rgba(200,0,0,0.9);border:1px solid #000;border-radius:50%;color:#fff;font-size:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto;opacity:0;z-index:30;transition:opacity 0.15s}
.pp:hover .overlay-del{opacity:1}

/* Asset library — FIXED: not hidden */
#asset-library{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:8px;display:flex;flex-direction:column;gap:5px}

/* Inspector */
#inspector-panel{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px;display:flex;flex-direction:column;gap:6px;min-height:100px}
.inspector-section{margin-bottom:4px;border:1px solid #2a2a2a;border-radius:4px;overflow:hidden}
.inspector-section summary{cursor:pointer;font-weight:bold;font-size:11px;color:#ff0;padding:5px 8px;background:#1f1f1f;user-select:none;list-style:none;display:flex;align-items:center;gap:4px}
.inspector-section summary::before{content:'▶';font-size:9px;transition:transform 0.15s}
.inspector-section[open] summary::before{content:'▼'}
.inspector-section summary:hover{background:#2a2a2a}
.inspector-controls{padding:8px;display:flex;flex-direction:column;gap:6px;background:#161616}

/* Layout picker */
.layout-picker{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:4px}
.layout-card{background:#222;border:2px solid #333;border-radius:4px;padding:5px;cursor:pointer;transition:all 0.15s;aspect-ratio:4/3}
.layout-card:hover{border-color:#ff0;transform:scale(1.04)}
.layout-card.selected{border-color:#0f0;background:#002a00}
.layout-preview{width:100%;height:100%;display:grid;gap:2px;background:#000;border-radius:2px}
.layout-preview-cell{background:#555;border-radius:1px;display:flex;align-items:center;justify-content:center;font-size:8px;color:#ccc}

/* Color pickers */
.cprow{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.cprow label{margin:0;white-space:nowrap;font-size:10px}
input[type=color]{width:32px;height:24px;padding:0;border:1px solid #555;border-radius:3px;cursor:pointer;background:none}

/* JSON area */
#json-area{background:#1a1a1a;border:1px solid #333;border-radius:7px;padding:9px}

/* Auto-save */
#autosave-status{font-size:9px;color:#555;text-align:center;padding:2px 0;font-family:monospace}
#autosave-status.saved{color:#0a0}
#autosave-status.soon{color:#fa0}

/* Group items */
.group-item{background:#1e1e1e;border:1px solid #444;border-radius:5px;margin-bottom:4px;overflow:hidden}
.dragging{opacity:0.4}
.drag-over{border-color:#0ff !important;background:#002a2a !important}

/* Panel drop target */
.pp.panel-drop-target{outline:3px dashed #0ff;outline-offset:-3px}

/* Panel group */
.panel-group{background:#000}

/* Modal */
#modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:1000;align-items:center;justify-content:center}

/* Event history */
#history-list{display:flex;flex-direction:column;gap:1px;max-height:120px;overflow-y:auto}
.history-item{font-size:9px;color:#888;padding:2px 4px;border-bottom:1px solid #1a1a1a;line-height:1.4}
.history-time{color:#555;margin-right:4px}
.history-type{color:#0af;font-weight:700;margin-right:3px}
.history-detail{color:#aaa}